{"version":3,"sources":["services/persons.js","components/Filter.js","components/AddPerson.js","components/Persons.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","id","put","delete","Filter","filtered","searchByName","persons","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNum","handleNumChange","onSubmit","type","Persons","data","searchName","removeContact","names","filter","person","name","toLowerCase","includes","map","key","number","onClick","Message","message","className","App","useState","setPersons","setNewName","setNewNum","setMessage","msgType","setMsgType","resetNew","useEffect","personService","then","response","catch","error","console","log","setTimeout","updateNumber","num","event","target","preventDefault","undefined","existing","length","concat","window","confirm","x","status","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4facab51.chunk.js","sourcesContent":["import axios from 'axios'\n// const baseUrl = '/api/persons'\n// const baseUrl = 'http://localhost:3001/api/persons'\nconst baseUrl = 'https://tranquil-retreat-83953.herokuapp.com/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { \n  getAll: getAll, \n  create: create,\n  update: update,\n  remove: remove\n}","import React from 'react'\n\nconst Filter = ({filtered, persons, searchByName}) => {\n  //persons.map((person) => person.names).filter(names => names.includes(searchName))\n\n  return (\n    <div>Type name to filter: \n      <input value={filtered} onChange={searchByName}></input>\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = ({addPerson, newName, handleNameChange, newNum, handleNumChange}) => {\n  return (\n    <div>\n      <h2>Add new</h2>\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input value={newName} onChange={handleNameChange} />\n        </div>\n        <div>number: <input value={newNum} onChange={handleNumChange} /></div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Persons = ({ data, searchName, removeContact }) => {\n  const filteredData = data.filter((person) => person.name.toLowerCase().includes(searchName.toLowerCase()))\n\n  const names = filteredData.map((person) => {\n    return <div key={person.id}>{person.name}, {person.number} <button onClick={() => removeContact(person.id)}>Delete</button></div>\n  })\n\n  return (\n    <div>\n      {names} \n    </div>\n  )\n}\n\nexport default Persons","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport './index.css'\nimport Filter from './components/Filter'\nimport PersonForm from './components/AddPerson'\nimport Persons from './components/Persons'\n\nconst Message = ({message, type}) => {\n  return (\n    <div className={type}>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNum, setNewNum ] = useState('')\n  const [ filtered, searchName ] = useState('')\n  const [ message, setMessage ] = useState(null)\n  const [ msgType, setMsgType ] = useState(null)\n  \n  const resetNew = () => {\n    setNewName('')\n    setNewNum('')\n  }\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response.data)\n      })\n      .catch((error) => {\n        console.log(error)\n        setMessage(\n          'Oops! Something went wrong...'\n        )\n        setMsgType('error')\n        setTimeout(() => {\n          setMessage(null)\n          setMsgType(null)\n        }, 5000)\n      })\n  }, [])\n\n  const searchByName = (event) => {\n    console.log('filternames', event.target.value)\n    searchName(event.target.value)\n  }\n\n  const addPerson = (event) => {\n    // prevent submit with default values\n    event.preventDefault();\n    if (newName === undefined || newName === \"\") { return }\n\n    const existing = persons.filter(person => person.name === newName)\n    if (existing.length === 1) {\n      if (window.confirm(`${newName} is already added to phonebook, update a number?`)) {\n        console.log('existing', existing)\n        const num = { ...existing[0], number: newNum }\n        updateNumber(existing[0].id, num)\n      }\n      resetNew()\n      return\n    }\n\n    personService\n      .create({\"name\": newName, \"number\": newNum})\n      .then(response => {\n        setPersons(persons.concat(response.data))\n        resetNew()\n        setMessage(\n          `New contact '${newName}' added.`\n        )\n        setMsgType('success')\n        setTimeout(() => {\n          setMessage(null)\n          setMsgType(null)\n        }, 5000)\n      })\n      .catch((error) => {\n        console.log(error)\n        setMessage(\n          'Oops! Something went wrong...'\n        )\n        setMsgType('error')\n        setTimeout(() => {\n          setMessage(null)\n          setMsgType(null)\n        }, 5000)\n      })\n  }\n  \n\n  const handleNameChange = (event) => {\n    console.log('nc', event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumChange = (event) => {\n    setNewNum(event.target.value)\n  }\n\n  const updateNumber = (id, num) => {\n    personService\n      .update(id, num)\n      .then(response => {\n        console.log('user updated', response.data)\n        setMessage(\n          `Contact updated.`\n        )\n        setMsgType('success')\n        setTimeout(() => {\n          setMessage(null)\n          setMsgType(null)\n        }, 5000)\n        setPersons(persons.map(person => person.id === id ? response.data : person))\n      })\n      .catch((error) => {\n        console.log(error)\n        setMessage(\n          'Oops! Something went wrong...'\n        )\n        setMsgType('error')\n        setTimeout(() => {\n          setMessage(null)\n          setMsgType(null)\n        }, 5000)\n      })\n  }\n\n  const removeContact = (id) => {\n    personService\n      .remove(id)\n      .then(response => {\n        const name = persons.filter(person => person.id === id).map(x => x.name)\n        console.log('x', name)\n        setMessage(\n          `'${name}' was removed from contacts.`\n        )\n        setMsgType('success')\n\n        setTimeout(() => {\n          setMessage(null)\n          setMsgType(null)\n        }, 5000)\n        setPersons(persons.filter(person => person.id !== id))\n        \n      })\n      .catch((error) => {\n        console.log(error)\n        if(error.response.status === 404) {\n          setPersons(persons.filter(person => person.id !== id))\n          setMessage(\n            'Contact has already been removed'\n          )\n          setMsgType('success')\n          setTimeout(() => {\n            setMessage(null)\n            setMsgType(null)\n          }, 5000)\n          return\n        }\n        setMessage(\n          'Oops! Something went wrong...'\n        )\n        setMsgType('error')\n        setTimeout(() => {\n          setMessage(null)\n          setMsgType(null)\n        }, 5000)\n      })\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Message message={message} type={msgType} />\n      <Filter \n        filtered={filtered}\n        persons={persons}\n        searchByName={searchByName} \n      />\n      <PersonForm \n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNum={newNum}\n        handleNumChange={handleNumChange}\n      />\n\n      <h2>Numbers</h2>\n      <Persons \n        data={persons} \n        searchName={filtered}\n        removeContact={removeContact}\n      />\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}